<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Options Greeks Analyzer</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #000;
            min-height: 100vh;
            padding: 20px;
            color: #e0e0e0;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        .header {
            text-align: center;
            margin-bottom: 40px;
        }

        .title {
            font-size: 3.5em;
            font-weight: 200;
            margin-bottom: 10px;
            background: linear-gradient(45deg, #00ff88, #00a8ff);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            display: inline-block;
        }

        .subtitle {
            color: #666;
            font-size: 1.2em;
            font-weight: 300;
        }

        .input-section {
            background: #111;
            border: 1px solid #222;
            padding: 30px;
            margin-bottom: 30px;
            border-radius: 8px;
        }

        .section-title {
            font-size: 1.8em;
            color: #00ff88;
            margin-bottom: 20px;
            font-weight: 500;
        }

        .input-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 25px;
        }

        .input-group {
            display: flex;
            flex-direction: column;
        }

        label {
            font-size: 0.85em;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            color: #888;
            margin-bottom: 8px;
        }

        input {
            background: #000;
            border: 1px solid #333;
            color: #fff;
            padding: 12px;
            font-size: 16px;
            font-family: monospace;
            transition: all 0.3s;
        }

        input:focus {
            outline: none;
            border-color: #00ff88;
            box-shadow: 0 0 0 2px rgba(0, 255, 136, 0.1);
        }

        button {
            background: #00ff88;
            color: #000;
            border: none;
            padding: 16px 40px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            text-transform: uppercase;
            letter-spacing: 1px;
            transition: all 0.3s;
            width: 100%;
            margin-top: 10px;
        }

        button:hover {
            background: #00cc70;
            transform: translateY(-2px);
        }

        .results {
            display: none;
        }

        .greek-card {
            background: #111;
            border: 1px solid #222;
            padding: 30px;
            margin-bottom: 20px;
            position: relative;
            transition: all 0.3s;
        }

        .greek-card:hover {
            border-color: #333;
            transform: translateX(5px);
        }

        .greek-card::before {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            bottom: 0;
            width: 4px;
            background: #333;
            transition: all 0.3s;
        }

        .greek-card:hover::before {
            background: #00ff88;
        }

        .greek-card.gamma::before { background: #ffa500; }
        .greek-card.theta::before { background: #ff4444; }
        .greek-card.vega::before { background: #a855f7; }
        .greek-card.rho::before { background: #6b7280; }

        .greek-header {
            display: flex;
            justify-content: space-between;
            align-items: baseline;
            margin-bottom: 25px;
            padding-bottom: 20px;
            border-bottom: 1px solid #222;
        }

        .greek-title {
            font-size: 2em;
            font-weight: 600;
            color: #fff;
        }

        .greek-symbol {
            color: #666;
            margin-left: 10px;
            font-size: 0.9em;
        }

        .greek-subtitle {
            color: #666;
            font-size: 0.9em;
            margin-top: 5px;
        }

        .greek-value {
            font-size: 2.5em;
            font-family: monospace;
            font-weight: 200;
        }

        .value-positive { color: #00ff88; }
        .value-negative { color: #ff4444; }
        .value-neutral { color: #ffa500; }

        .metrics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-bottom: 25px;
        }

        .metric-box {
            background: #000;
            padding: 15px;
            border-radius: 4px;
            border: 1px solid #222;
        }

        .metric-label {
            font-size: 0.8em;
            color: #666;
            margin-bottom: 5px;
        }

        .metric-value {
            font-size: 1.8em;
            font-family: monospace;
            color: #fff;
        }

        .explanation-box {
            background: rgba(0, 0, 0, 0.5);
            padding: 20px;
            border-radius: 4px;
            margin-bottom: 20px;
            line-height: 1.7;
        }

        .insight-box {
            padding: 20px;
            border-radius: 4px;
            margin-bottom: 20px;
            border-left: 3px solid;
        }

        .insight-green {
            background: rgba(0, 255, 136, 0.1);
            border-color: #00ff88;
            color: #00ff88;
        }

        .insight-red {
            background: rgba(255, 68, 68, 0.1);
            border-color: #ff4444;
            color: #ff8888;
        }

        .insight-yellow {
            background: rgba(255, 165, 0, 0.1);
            border-color: #ffa500;
            color: #ffb84d;
        }

        .insight-purple {
            background: rgba(168, 85, 247, 0.1);
            border-color: #a855f7;
            color: #c084fc;
        }

        .progress-bar {
            height: 8px;
            background: #222;
            border-radius: 4px;
            overflow: hidden;
            margin-top: 20px;
        }

        .progress-fill {
            height: 100%;
            transition: width 1s ease-out;
            position: relative;
            overflow: hidden;
        }

        .progress-fill::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            bottom: 0;
            right: 0;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
            animation: shimmer 2s infinite;
        }

        @keyframes shimmer {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }

        .progress-label {
            display: flex;
            justify-content: space-between;
            margin-top: 5px;
            font-size: 0.85em;
            color: #666;
        }

        .summary-section {
            background: linear-gradient(135deg, #111, #1a1a1a);
            border: 1px solid #333;
            padding: 40px;
            border-radius: 8px;
            position: relative;
            overflow: hidden;
        }

        .summary-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, #00ff88, #ffa500, #ff4444);
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 30px;
            margin-bottom: 30px;
        }

        .stat-card {
            text-align: center;
        }

        .stat-icon {
            font-size: 3em;
            margin-bottom: 10px;
        }

        .stat-value {
            font-size: 2em;
            font-family: monospace;
            color: #fff;
            margin-bottom: 5px;
        }

        .stat-label {
            font-size: 0.85em;
            color: #666;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .position-insights {
            background: rgba(0, 0, 0, 0.3);
            padding: 25px;
            border-radius: 4px;
            margin-bottom: 25px;
        }

        .insight-list {
            list-style: none;
            padding: 0;
        }

        .insight-item {
            padding: 10px 0;
            display: flex;
            align-items: start;
        }

        .insight-bullet {
            margin-right: 10px;
            font-size: 1.2em;
        }

        .action-plan {
            background: linear-gradient(135deg, rgba(0, 255, 136, 0.1), rgba(0, 168, 255, 0.1));
            border: 1px solid rgba(0, 255, 136, 0.3);
            padding: 25px;
            border-radius: 4px;
        }

        .action-item {
            display: flex;
            align-items: start;
            margin-bottom: 15px;
        }

        .action-icon {
            font-size: 1.5em;
            margin-right: 15px;
        }

        .position-details-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 25px;
        }

        .detail-card {
            background: rgba(0, 0, 0, 0.3);
            padding: 15px;
            border-radius: 4px;
            border: 1px solid #222;
        }


    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1 class="title">Options Position Analyzer</h1>
            <p class="subtitle">Understanding your options position in plain English</p>
        </div>

        <div class="input-section">
            <h2 class="section-title">Position Details</h2>
            <div class="input-grid">
                <div class="input-group">
                    <label>Current Stock Price</label>
                    <input type="number" id="stockPrice" placeholder="$150.00" step="0.01">
                </div>
                <div class="input-group">
                    <label>Strike Price</label>
                    <input type="number" id="strikePrice" placeholder="$155.00" step="0.01">
                </div>
                <div class="input-group">
                    <label>Days Until Expiration</label>
                    <input type="number" id="daysToExpiration" placeholder="30" step="1">
                </div>
                <div class="input-group">
                    <label>Implied Volatility (IV) %</label>
                    <input type="number" id="impliedVolatility" placeholder="25" step="0.1">
                </div>
            </div>

            <h2 class="section-title">The Greeks (Risk Numbers)</h2>
            <div class="input-grid">
                <div class="input-group">
                    <label>Delta</label>
                    <input type="number" id="delta" placeholder="0.65" step="0.01">
                </div>
                <div class="input-group">
                    <label>Gamma</label>
                    <input type="number" id="gamma" placeholder="0.025" step="0.001">
                </div>
                <div class="input-group">
                    <label>Theta</label>
                    <input type="number" id="theta" placeholder="-0.05" step="0.01">
                </div>
                <div class="input-group">
                    <label>Vega</label>
                    <input type="number" id="vega" placeholder="0.12" step="0.01">
                </div>
                <div class="input-group">
                    <label>Rho</label>
                    <input type="number" id="rho" placeholder="0.08" step="0.01">
                </div>
            </div>

            <button onclick="analyzePosition()">Analyze My Position</button>
        </div>

        <div id="results" class="results"></div>
    </div>

    <script>
        function analyzePosition() {
            const stockPrice = parseFloat(document.getElementById('stockPrice').value) || 0;
            const strikePrice = parseFloat(document.getElementById('strikePrice').value) || 0;
            const daysToExpiration = parseFloat(document.getElementById('daysToExpiration').value) || 0;
            const impliedVolatility = parseFloat(document.getElementById('impliedVolatility').value) || 0;
            
            const delta = parseFloat(document.getElementById('delta').value) || 0;
            const gamma = parseFloat(document.getElementById('gamma').value) || 0;
            const theta = parseFloat(document.getElementById('theta').value) || 0;
            const vega = parseFloat(document.getElementById('vega').value) || 0;
            const rho = parseFloat(document.getElementById('rho').value) || 0;

            if (!delta && !gamma && !theta && !vega && !rho) {
                alert('Please enter at least one Greek value');
                return;
            }

            const results = document.getElementById('results');
            results.style.display = 'block';
            results.innerHTML = '';

            // Generate analysis for each Greek
            if (delta) results.innerHTML += createDeltaAnalysis(delta, stockPrice, strikePrice);
            if (gamma) results.innerHTML += createGammaAnalysis(gamma, delta);
            if (theta) results.innerHTML += createThetaAnalysis(theta, delta, daysToExpiration);
            if (vega) results.innerHTML += createVegaAnalysis(vega, impliedVolatility);
            if (rho) results.innerHTML += createRhoAnalysis(rho);

            // Add summary
            results.innerHTML += createSummary(delta, gamma, theta, vega, rho, stockPrice, strikePrice, daysToExpiration, impliedVolatility);

            // Animate progress bars
            setTimeout(() => {
                const progressFills = document.querySelectorAll('.progress-fill');
                progressFills.forEach(fill => {
                    const targetWidth = fill.getAttribute('data-width');
                    fill.style.width = targetWidth;
                });
            }, 100);
        }

        function getMoneyness(stockPrice, strikePrice, delta) {
            if (stockPrice && strikePrice) {
                const ratio = stockPrice / strikePrice;
                if (ratio > 1.05) return 'in-the-money (winning)';
                if (ratio > 0.95) return 'at-the-money (break-even zone)';
                return 'out-of-the-money (losing currently)';
            }
            return delta > 0.6 ? 'likely in-the-money' : delta > 0.4 ? 'near-the-money' : 'out-of-the-money';
        }

        function createDeltaAnalysis(delta, stockPrice, strikePrice) {
            const absDelta = Math.abs(delta);
            const percentage = absDelta * 100;
            const dollarMove = absDelta;
            const shareEquivalent = percentage;
            const moneyness = getMoneyness(stockPrice, strikePrice, absDelta);

            return `
                <div class="greek-card">
                    <div class="greek-header">
                        <div>
                            <div class="greek-title">Delta <span class="greek-symbol">Δ</span></div>
                            <div class="greek-subtitle">How much your option moves with the stock</div>
                        </div>
                        <div class="greek-value ${delta >= 0 ? 'value-positive' : 'value-negative'}">${delta.toFixed(4)}</div>
                    </div>

                    <div class="metrics-grid">
                        <div class="metric-box">
                            <div class="metric-label">If stock moves $1</div>
                            <div class="metric-value">$${dollarMove.toFixed(2)}</div>
                        </div>
                        <div class="metric-box">
                            <div class="metric-label">Win probability</div>
                            <div class="metric-value">${percentage.toFixed(0)}%</div>
                        </div>
                        <div class="metric-box">
                            <div class="metric-label">Acts like shares</div>
                            <div class="metric-value">${shareEquivalent.toFixed(0)}</div>
                        </div>
                        <div class="metric-box">
                            <div class="metric-label">Position type</div>
                            <div class="metric-value" style="font-size: 1.2em;">${moneyness}</div>
                        </div>
                    </div>

                    <div class="explanation-box">
                        <strong>Plain English:</strong> Your option acts like owning ${shareEquivalent.toFixed(0)} shares of stock. 
                        When the stock goes up $1, you make $${dollarMove.toFixed(2)}. When it drops $1, you lose $${dollarMove.toFixed(2)}.
                    </div>

                    <div class="insight-box insight-green">
                        💡 <strong>What to do:</strong> ${
                            absDelta > 0.7 ? 
                            "Your option is deep in-the-money and moves almost like the stock. Consider taking profits or exercising." :
                            absDelta > 0.5 ?
                            "Good directional exposure. Hold if you believe the stock will continue in your favor." :
                            "Lower probability play. Only hold if you expect a big move or have time for it to develop."
                        }
                    </div>

                    <div class="progress-bar">
                        <div class="progress-fill" data-width="${percentage}%" style="background: #00ff88; width: 0;">
                        </div>
                    </div>
                    <div class="progress-label">
                        <span>Stock-like behavior</span>
                        <span>${percentage.toFixed(0)}%</span>
                    </div>
                </div>
            `;
        }

        function createGammaAnalysis(gamma, delta) {
            const deltaChange1 = gamma;
            const deltaChange5 = gamma * 5;
            const intensity = gamma > 0.05 ? 'Extreme!' : gamma > 0.03 ? 'High' : gamma > 0.01 ? 'Moderate' : 'Low';
            const riskLevel = gamma > 0.04 ? '🔥 Hot' : gamma > 0.02 ? '⚡ Active' : '😌 Calm';
            const percentage = Math.min((gamma / 0.10) * 100, 100);

            return `
                <div class="greek-card gamma">
                    <div class="greek-header">
                        <div>
                            <div class="greek-title">Gamma <span class="greek-symbol">Γ</span></div>
                            <div class="greek-subtitle">How fast your profits can accelerate (or losses!)</div>
                        </div>
                        <div class="greek-value value-neutral">${gamma.toFixed(4)}</div>
                    </div>

                    <div class="metrics-grid">
                        <div class="metric-box">
                            <div class="metric-label">Delta change/$1</div>
                            <div class="metric-value">${deltaChange1.toFixed(3)}</div>
                        </div>
                        <div class="metric-box">
                            <div class="metric-label">$5 move impact</div>
                            <div class="metric-value">${deltaChange5.toFixed(3)}</div>
                        </div>
                        <div class="metric-box">
                            <div class="metric-label">Acceleration</div>
                            <div class="metric-value">${intensity}</div>
                        </div>
                        <div class="metric-box">
                            <div class="metric-label">Risk level</div>
                            <div class="metric-value">${riskLevel}</div>
                        </div>
                    </div>

                    <div class="explanation-box">
                        <strong>Plain English:</strong> Your option's sensitivity changes by ${deltaChange1.toFixed(3)} for every $1 stock move. 
                        ${gamma > 0.03 ? "This means your profits AND losses can accelerate quickly!" : "Your option has steady, predictable behavior."}
                    </div>

                    ${gamma > 0.03 ? `
                        <div class="insight-box insight-red">
                            ⚠️ <strong>High Risk Alert:</strong> Your position can swing wildly. A ${gamma > 0.05 ? '2-3%' : '5%'} move could double your risk. Set tight stop losses!
                        </div>
                    ` : ''}

                    <div class="insight-box insight-yellow">
                        📊 <strong>Example scenario:</strong> If the stock jumps $5, your delta becomes ${(delta + deltaChange5).toFixed(3)}, 
                        making your option act like ${((delta + deltaChange5) * 100).toFixed(0)} shares instead of ${(delta * 100).toFixed(0)}.
                    </div>

                    <div class="progress-bar">
                        <div class="progress-fill" data-width="${percentage}%" style="background: #ffa500; width: 0;">
                        </div>
                    </div>
                    <div class="progress-label">
                        <span>Acceleration intensity</span>
                        <span>${intensity}</span>
                    </div>
                </div>
            `;
        }

        function createThetaAnalysis(theta, delta, daysToExpiration) {
            const dailyDecay = Math.abs(theta);
            const weeklyDecay = dailyDecay * 5;
            const weekendDecay = dailyDecay * 2.5;
            const totalDecay = daysToExpiration ? dailyDecay * daysToExpiration : 0;
            const percentage = Math.min((dailyDecay / 0.20) * 100, 100);

            return `
                <div class="greek-card theta">
                    <div class="greek-header">
                        <div>
                            <div class="greek-title">Theta <span class="greek-symbol">Θ</span></div>
                            <div class="greek-subtitle">Money you lose every day (time decay)</div>
                        </div>
                        <div class="greek-value value-negative">${theta.toFixed(4)}</div>
                    </div>

                    <div class="metrics-grid">
                        <div class="metric-box">
                            <div class="metric-label">Daily loss</div>
                            <div class="metric-value" style="color: #ff4444;">-$${dailyDecay.toFixed(2)}</div>
                        </div>
                        <div class="metric-box">
                            <div class="metric-label">Weekly loss</div>
                            <div class="metric-value" style="color: #ff4444;">-$${weeklyDecay.toFixed(2)}</div>
                        </div>
                        <div class="metric-box">
                            <div class="metric-label">Weekend loss</div>
                            <div class="metric-value" style="color: #ff4444;">-$${weekendDecay.toFixed(2)}</div>
                        </div>
                        <div class="metric-box">
                            <div class="metric-label">Time left</div>
                            <div class="metric-value">${daysToExpiration || '?'} days</div>
                        </div>
                    </div>

                    <div class="explanation-box">
                        <strong>Plain English:</strong> You're paying $${dailyDecay.toFixed(2)} per day to hold this option, like a parking meter that never stops. 
                        Weekends cost you $${weekendDecay.toFixed(2)} even though markets are closed!
                    </div>

                    ${dailyDecay > 0.10 ? `
                        <div class="insight-box insight-red">
                            ⏰ <strong>Time is running out!</strong> You need the stock to move $${(dailyDecay / Math.abs(delta || 1)).toFixed(2)} 
                            ${delta > 0 ? 'up' : 'down'} every day just to break even on time decay.
                        </div>
                    ` : ''}

                    <div class="insight-box insight-yellow">
                        💰 <strong>Break-even calculation:</strong> ${
                            daysToExpiration ? 
                            `With ${daysToExpiration} days left, you'll lose $${totalDecay.toFixed(2)} total to time decay. Plan accordingly!` :
                            "Enter days to expiration above to see total time decay cost."
                        }
                    </div>

                    <div class="progress-bar">
                        <div class="progress-fill" data-width="${percentage}%" style="background: #ff4444; width: 0;">
                        </div>
                    </div>
                    <div class="progress-label">
                        <span>Daily burn rate</span>
                        <span>-$${dailyDecay.toFixed(2)}/day</span>
                    </div>
                </div>
            `;
        }

        function createVegaAnalysis(vega, impliedVolatility) {
            const volMove1 = vega;
            const volMove10 = vega * 10;
            const sensitivity = vega > 0.15 ? 'Very High' : vega > 0.08 ? 'High' : 'Moderate';
            const bestFor = vega > 0.10 ? '📰 Events' : '📈 Trends';
            const percentage = Math.min((vega / 0.30) * 100, 100);
            
            // IV analysis
            const ivLevel = impliedVolatility > 50 ? 'Very High' : impliedVolatility > 35 ? 'High' : impliedVolatility > 20 ? 'Normal' : 'Low';
            const ivRank = impliedVolatility > 50 ? '🔥 Expensive' : impliedVolatility > 35 ? '⚡ Elevated' : impliedVolatility > 20 ? '✅ Fair' : '💎 Cheap';

            return `
                <div class="greek-card vega">
                    <div class="greek-header">
                        <div>
                            <div class="greek-title">Vega <span class="greek-symbol">ν</span></div>
                            <div class="greek-subtitle">How volatility (big moves) affects your option</div>
                        </div>
                        <div class="greek-value value-positive">${vega.toFixed(4)}</div>
                    </div>

                    <div class="metrics-grid">
                        <div class="metric-box">
                            <div class="metric-label">1% vol change</div>
                            <div class="metric-value">${volMove1.toFixed(2)}</div>
                        </div>
                        <div class="metric-box">
                            <div class="metric-label">Earnings move</div>
                            <div class="metric-value">${volMove10.toFixed(2)}</div>
                        </div>
                        <div class="metric-box">
                            <div class="metric-label">Vol sensitivity</div>
                            <div class="metric-value">${sensitivity}</div>
                        </div>
                        <div class="metric-box">
                            <div class="metric-label">Best for</div>
                            <div class="metric-value">${bestFor}</div>
                        </div>
                    </div>

                    ${impliedVolatility ? `
                        <div class="metrics-grid" style="margin-top: 15px;">
                            <div class="metric-box">
                                <div class="metric-label">Current IV</div>
                                <div class="metric-value">${impliedVolatility.toFixed(1)}%</div>
                            </div>
                            <div class="metric-box">
                                <div class="metric-label">IV Level</div>
                                <div class="metric-value">${ivLevel}</div>
                            </div>
                            <div class="metric-box">
                                <div class="metric-label">Option Pricing</div>
                                <div class="metric-value">${ivRank}</div>
                            </div>
                            <div class="metric-box">
                                <div class="metric-label">IV to 30% move</div>
                                <div class="metric-value">${impliedVolatility > 30 ? '-' : '+'}${Math.abs((30 - impliedVolatility) * vega).toFixed(2)}</div>
                            </div>
                        </div>
                    ` : ''}

                    <div class="explanation-box">
                        <strong>Plain English:</strong> When market fear increases (volatility up), you make ${volMove1.toFixed(2)} per 1% increase. 
                        When things calm down, you lose the same. ${vega > 0.10 ? "Perfect for earnings plays!" : "Less affected by market mood swings."}
                        ${impliedVolatility ? ` Current IV of ${impliedVolatility}% means options are ${ivLevel.toLowerCase()} priced.` : ''}
                    </div>

                    ${vega > 0.15 ? `
                        <div class="insight-box insight-purple">
                            🎰 <strong>Volatility play!</strong> After earnings, volatility often drops 20-30%. 
                            This could cost you ${(vega * 25).toFixed(2)} instantly, even if the stock moves your way!
                            ${impliedVolatility > 40 ? ' With IV already high, the crush risk is even greater!' : ''}
                        </div>
                    ` : ''}

                    <div class="insight-box insight-green">
                        📊 <strong>Strategy tip:</strong> ${
                            vega > 0.10 ?
                            `Buy when everyone's calm (low volatility), sell when everyone's panicking (high volatility). ${
                                impliedVolatility ? 
                                (impliedVolatility > 35 ? 'IV is elevated - consider selling or wait for it to drop before buying.' : 
                                 impliedVolatility < 25 ? 'IV is low - good time to buy if you expect volatility to increase!' : 
                                 'IV is normal - position based on your market outlook.') : 
                                'Check the VIX!'
                            }` :
                            "Focus on stock direction rather than volatility. This option won't benefit much from fear spikes."
                        }
                    </div>

                    <div class="progress-bar">
                        <div class="progress-fill" data-width="${percentage}%" style="background: #a855f7; width: 0;">
                        </div>
                    </div>
                    <div class="progress-label">
                        <span>Volatility sensitivity</span>
                        <span>${sensitivity}</span>
                    </div>
                </div>
            `;
        }

        function createRhoAnalysis(rho) {
            const rateMove25bp = Math.abs(rho * 0.25);
            const rateMove1 = Math.abs(rho);
            const sensitivity = Math.abs(rho) > 0.15 ? 'High' : Math.abs(rho) > 0.08 ? 'Moderate' : 'Low';
            const percentage = Math.min((Math.abs(rho) / 0.20) * 100, 100);

            return `
                <div class="greek-card rho">
                    <div class="greek-header">
                        <div>
                            <div class="greek-title">Rho <span class="greek-symbol">ρ</span></div>
                            <div class="greek-subtitle">How interest rates affect your option</div>
                        </div>
                        <div class="greek-value ${rho >= 0 ? 'value-positive' : 'value-negative'}">${rho.toFixed(4)}</div>
                    </div>

                    <div class="metrics-grid">
                        <div class="metric-box">
                            <div class="metric-label">0.25% rate move</div>
                            <div class="metric-value">${rho >= 0 ? '+' : '-'}$${rateMove25bp.toFixed(2)}</div>
                        </div>
                        <div class="metric-box">
                            <div class="metric-label">1% rate move</div>
                            <div class="metric-value">${rho >= 0 ? '+' : '-'}$${rateMove1.toFixed(2)}</div>
                        </div>
                        <div class="metric-box">
                            <div class="metric-label">Rate sensitivity</div>
                            <div class="metric-value">${sensitivity}</div>
                        </div>
                        <div class="metric-box">
                            <div class="metric-label">Fed impact</div>
                            <div class="metric-value">${Math.abs(rho) > 0.10 ? '📊 Notable' : '😴 Minimal'}</div>
                        </div>
                    </div>

                    <div class="explanation-box">
                        <strong>Plain English:</strong> ${
                            rho > 0 ?
                            `Your position benefits from rising interest rates. A 0.25% rate hike would add $${rateMove25bp.toFixed(2)} to your option value.` :
                            `Your position benefits from falling interest rates. A 0.25% rate cut would add $${rateMove25bp.toFixed(2)} to your option value.`
                        }
                    </div>

                    <div class="insight-box insight-green">
                        📈 <strong>Practical context:</strong> ${
                            Math.abs(rho) > 0.10 ?
                            `With the Fed typically moving in 0.25% increments, each rate decision could impact your position by $${rateMove25bp.toFixed(2)}.` :
                            "Rate sensitivity is minimal. Focus on the primary Greeks (Delta, Gamma, Theta, Vega) for position management."
                        }
                    </div>

                    <div class="progress-bar">
                        <div class="progress-fill" data-width="${percentage}%" style="background: #6b7280; width: 0;">
                        </div>
                    </div>
                    <div class="progress-label">
                        <span>Interest rate sensitivity</span>
                        <span>${sensitivity}</span>
                    </div>
                </div>
            `;
        }

        function createSummary(delta, gamma, theta, vega, rho, stockPrice, strikePrice, daysToExpiration, impliedVolatility) {
            // Calculate risk score
            const gammaRisk = gamma > 0.04 ? 3 : gamma > 0.02 ? 2 : 1;
            const thetaRisk = Math.abs(theta) > 0.10 ? 3 : Math.abs(theta) > 0.05 ? 2 : 1;
            const vegaRisk = vega > 0.15 ? 2 : vega > 0.08 ? 1 : 0;
            const totalRisk = gammaRisk + thetaRisk + vegaRisk;
            
            const riskEmoji = totalRisk > 6 ? '🔥' : totalRisk > 4 ? '⚡' : totalRisk > 2 ? '⚠️' : '✅';
            const timeHorizon = Math.abs(theta) > 0.10 ? '< 1 week' : Math.abs(theta) > 0.05 ? '1-2 weeks' : '> 2 weeks';
            const winProbability = Math.abs(delta) * 100;
            const dailyCost = Math.abs(theta);

            // Generate insights
            const insights = [];
            if (Math.abs(delta) > 0.6) {
                insights.push({ bullet: '🎯', color: 'green', text: `Strong directional bet - you're confident the stock will move ${delta > 0 ? 'up' : 'down'}` });
            }
            if (gamma > 0.03) {
                insights.push({ bullet: '🎢', color: 'orange', text: 'High acceleration potential - profits can grow quickly, but so can losses' });
            }
            if (Math.abs(theta) > 0.08) {
                insights.push({ bullet: '⏰', color: 'red', text: 'Significant time pressure - need a move soon or time decay will eat your profits' });
            }
            if (vega > 0.10) {
                insights.push({ bullet: '🌪️', color: 'purple', text: 'Volatility sensitive - great for events but watch for volatility crush' });
            }
            if (impliedVolatility > 40) {
                insights.push({ bullet: '💸', color: 'orange', text: 'High IV environment - options are expensive, consider selling strategies' });
            }

            // Generate action items
            const actions = [];
            if (Math.abs(theta) > 0.12) {
                actions.push({ icon: '⏰', text: `Time is critical! With ${dailyCost.toFixed(2)}/day decay, consider closing or rolling within ${Math.ceil(5 / dailyCost)} days.` });
            }
            if (gamma > 0.04) {
                actions.push({ icon: '🎯', text: 'Set tight stop losses. Your P&L can swing dramatically with small stock moves.' });
            }
            if (vega > 0.15 && theta < -0.08) {
                actions.push({ icon: '📅', text: 'Classic pre-earnings position. Take profits before the event to avoid IV crush!' });
            }
            if (impliedVolatility > 50 && vega > 0.10) {
                actions.push({ icon: '🎰', text: 'IV is very high! Consider taking profits on volatility or prepare for potential IV crush.' });
            }
            if (Math.abs(delta) > 0.7 && gamma < 0.02) {
                actions.push({ icon: '💰', text: 'Deep in-the-money with minimal time value. Consider taking profits or exercising.' });
            }
            if (actions.length === 0) {
                actions.push({ icon: '✅', text: 'Balanced position. Monitor daily and adjust based on market conditions.' });
            }

            return `
                <div class="summary-section">
                    <h2 class="greek-title" style="margin-bottom: 30px;">Your Position Summary</h2>
                    
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-icon">${riskEmoji}</div>
                            <div class="stat-value">${totalRisk > 6 ? 'Very High' : totalRisk > 4 ? 'High' : totalRisk > 2 ? 'Moderate' : 'Low'}</div>
                            <div class="stat-label">Risk Level</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon">⏱️</div>
                            <div class="stat-value">${timeHorizon}</div>
                            <div class="stat-label">Time Horizon</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon">🎲</div>
                            <div class="stat-value">${winProbability.toFixed(0)}%</div>
                            <div class="stat-label">Win Probability</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon">💸</div>
                            <div class="stat-value">${dailyCost.toFixed(2)}</div>
                            <div class="stat-label">Daily Cost</div>
                        </div>
                    </div>

                    <div class="position-insights">
                        <h3 style="color: #fff; margin-bottom: 20px;">What Your Position Tells Us:</h3>
                        <ul class="insight-list">
                            ${insights.map(item => `
                                <li class="insight-item">
                                    <span class="insight-bullet" style="color: ${
                                        item.color === 'green' ? '#00ff88' :
                                        item.color === 'orange' ? '#ffa500' :
                                        item.color === 'red' ? '#ff4444' :
                                        '#a855f7'
                                    }">${item.bullet}</span>
                                    <span>${item.text}</span>
                                </li>
                            `).join('')}
                        </ul>
                    </div>

                    <div class="action-plan">
                        <h3 style="color: #fff; margin-bottom: 20px;">Action Plan</h3>
                        ${actions.map(item => `
                            <div class="action-item">
                                <span class="action-icon">${item.icon}</span>
                                <span>${item.text}</span>
                            </div>
                        `).join('')}
                    </div>

                    ${stockPrice && strikePrice ? `
                        <div class="position-details-grid">
                            <div class="detail-card">
                                <div class="metric-label">Current Status</div>
                                <div class="metric-value" style="font-size: 1.2em;">${getMoneyness(stockPrice, strikePrice, Math.abs(delta))}</div>
                            </div>
                            <div class="detail-card">
                                <div class="metric-label">Distance to Strike</div>
                                <div class="metric-value" style="font-size: 1.2em;">
                                    ${Math.abs(stockPrice - strikePrice).toFixed(2)} 
                                    (${((Math.abs(stockPrice - strikePrice) / stockPrice) * 100).toFixed(1)}%)
                                </div>
                            </div>
                            <div class="detail-card">
                                <div class="metric-label">Days Remaining</div>
                                <div class="metric-value" style="font-size: 1.2em;">${daysToExpiration || '?'} days</div>
                            </div>
                            ${impliedVolatility ? `
                                <div class="detail-card">
                                    <div class="metric-label">Current IV</div>
                                    <div class="metric-value" style="font-size: 1.2em;">${impliedVolatility.toFixed(1)}%</div>
                                </div>
                            ` : ''}
                        </div>
                    ` : ''}
                </div>
            `;
        }
    </script>
</body>
</html>
